
1,创建数组
```py
arr1=np.array(data1)

arr1
Out[6]: array([6. , 7.5, 8. , 0. , 1. ])
```
除非显式说明，np.array会尝试为此数组推断出一个较为合适的数据类型。<br>
数据类型保存在一个特殊的dtype对象中。
```py
arr1.dtype
Out[7]: dtype('float64')
```
zeros创建全9数组
empty创建一个没有任何具体值的数组
```py
np.zeros(10)
Out[8]: array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])

np.zeros((3,6))
Out[9]: 
array([[0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0., 0.]])

np.empty((2,3,2))
Out[10]: 
array([[[6.23042070e-307, 3.56043053e-307],
        [1.37961641e-306, 1.33508845e-306],
        [1.33511969e-306, 4.45036417e-308]],

       [[8.34423493e-308, 1.11261027e-306],
        [1.11261977e-306, 1.24611266e-306],
        [2.22522596e-306, 3.91786943e-317]]])
```
![](https://github.com/BinGYiZhanG/Python_/blob/master/%E3%80%8A%E5%88%A9%E7%94%A8Python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B/Images/07071033.png)
指定ndarray的数据类型

```py
arr1=np.array([1,2,3],dtype=np.float64)

arr2=np.array([1,2,3],dtype=np.int32)

arr1
Out[13]: array([1., 2., 3.])

arr2
Out[14]: array([1, 2, 3])

arr1.dtype
Out[15]: dtype('float64')

arr2.dtype
Out[16]: dtype('int32')
```
![](https://github.com/BinGYiZhanG/Python_/blob/master/%E3%80%8A%E5%88%A9%E7%94%A8Python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B/Images/07071037.png)

通过ndarray的astype方法显式地转换其dtype
```py
arr1=np.array([1,2,3],dtype=np.float64)

arr2=np.array([1,2,3],dtype=np.int32)

arr1
Out[13]: array([1., 2., 3.])

arr2
Out[14]: array([1, 2, 3])

arr1.dtype
Out[15]: dtype('float64')

arr2.dtype
Out[16]: dtype('int32')

arr=np.array([1,2,3,4,5])

arr.dtype
Out[18]: dtype('int32')

float_arr=arr.astype(np.float64)

float_arr.dtype
Out[20]: dtype('float64')

arr=np.array([3.7,-1.2,-2.6,0.5,12.9,10.1])

arr
Out[22]: array([ 3.7, -1.2, -2.6,  0.5, 12.9, 10.1])

arr.astype(np.int32)
Out[23]: array([ 3, -1, -2,  0, 12, 10])

num_string=np.array(['1.23','-9.6','42'],dtype=np.string)
Traceback (most recent call last):

  File "<ipython-input-24-6447f1903308>", line 1, in <module>
    num_string=np.array(['1.23','-9.6','42'],dtype=np.string)

AttributeError: module 'numpy' has no attribute 'string'




num_string=np.array(['1.23','-9.6','42'],dtype=np.string_)

num_string.astype(float)
Out[26]: array([ 1.23, -9.6 , 42.  ])

```

dtype还有另一个用法,没看懂
## 真的是不知道这是写了写什么！
```py
int_array=np.arange(10)

calibers=np.array([.22,.270,.357,.380,.44,.50],dtype=np.float64)

int_array.astype(calibers.dtype)
Out[29]: array([0., 1., 2., 3., 4., 5., 6., 7., 8., 9.])
```
用简洁的类型代码表示dtype
```py
emp_uint32=np.empty(8,dtype='u4')

emp_uint32
Out[31]: 
array([         0, 1075314688,          0, 1075707904,          0,
       1075838976,          0, 1072693248], dtype=uint32)
```

## 数组和标量之间的运算
### 切片索引
选取整个数组
```py
arr3d=np.array([[1,2,3],[4,5,6],[7,8,9]])
arr3d[:]
Out[36]: 
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
```
切片<br>
二维下，也可切片

```py
arr3d
Out[33]: 
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])

arr3d[:,1]
Out[34]: array([2, 5, 8])

arr3d[:,:1]
Out[35]: 
array([[1],
       [4],
       [7]])
```
![](https://github.com/BinGYiZhanG/Python_/blob/master/%E3%80%8A%E5%88%A9%E7%94%A8Python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B/Images/07071102.png)
### 布尔型索引

##### randn函数是在numpy.random下的一个函数，用于生成一些正态分布的随机数据
```py
data=np.random.randn(7,4)

data
Out[43]: 
array([[ 2.53531643,  1.912589  ,  0.27110335, -0.53284575],
       [-1.0620225 , -0.69494004,  0.93343981,  1.65610459],
       [-0.28708822,  0.73980986,  0.14036875, -1.86025278],
       [-0.37093784, -0.76480681, -0.0914037 , -0.48780377],
       [ 1.38486007, -1.55119775,  0.89966649, -1.58596124],
       [-0.99806203,  0.54011298,  0.87547132,  0.13385801],
       [ 0.34158044, -0.01024773,  0.24382056,  0.14167333]])

names=='Bob'
Out[44]: array([ True, False, False,  True, False, False, False])

data[names=='Bob']
Out[46]: 
array([[ 2.53531643,  1.912589  ,  0.27110335, -0.53284575],
       [-0.37093784, -0.76480681, -0.0914037 , -0.48780377]])

data[names=='Bob',2:]
Out[47]: 
array([[ 0.27110335, -0.53284575],
       [-0.0914037 , -0.48780377]])

data[names=='Bob',3]
Out[49]: array([-0.53284575, -0.48780377])
```
#### 使用符号(!=)，波浪线(~)对条件进行否定
原文是采用负号(-)对条件取否，
```py
data[~(names=='Bob')]
Out[53]: 
array([[-1.0620225 , -0.69494004,  0.93343981,  1.65610459],
       [-0.28708822,  0.73980986,  0.14036875, -1.86025278],
       [ 1.38486007, -1.55119775,  0.89966649, -1.58596124],
       [-0.99806203,  0.54011298,  0.87547132,  0.13385801],
       [ 0.34158044, -0.01024773,  0.24382056,  0.14167333]])
```
#### 选取名字组合时，用&，|等布尔运算符

```py
mask=(names=='BOb')|(names=='Will')

data[mask]
Out[56]: 
array([[-0.28708822,  0.73980986,  0.14036875, -1.86025278],
       [ 1.38486007, -1.55119775,  0.89966649, -1.58596124]])
```
##### Python关键字and和or在布尔型数组中无效

#### 将data中的所有负值设为0
```py
data[data<0]=0

data
Out[58]: 
array([[2.53531643, 1.912589  , 0.27110335, 0.        ],
       [0.        , 0.        , 0.93343981, 1.65610459],
       [0.        , 0.73980986, 0.14036875, 0.        ],
       [0.        , 0.        , 0.        , 0.        ],
       [1.38486007, 0.        , 0.89966649, 0.        ],
       [0.        , 0.54011298, 0.87547132, 0.13385801],
       [0.34158044, 0.        , 0.24382056, 0.14167333]])
```

#### 通过一维布尔数组设置整行或列的值

```py
data[names!='Joe']=7

data
Out[60]: 
array([[7.        , 7.        , 7.        , 7.        ],
       [0.        , 0.        , 0.93343981, 1.65610459],
       [7.        , 7.        , 7.        , 7.        ],
       [7.        , 7.        , 7.        , 7.        ],
       [7.        , 7.        , 7.        , 7.        ],
       [0.        , 0.54011298, 0.87547132, 0.13385801],
       [0.34158044, 0.        , 0.24382056, 0.14167333]])
```

#### 花式索引

##### 1,对8X4数组进行索引
```py
arr=np.empty((8,4))

for i in range(8):
    arr[i]=i
    

arr
Out[63]: 
array([[0., 0., 0., 0.],
       [1., 1., 1., 1.],
       [2., 2., 2., 2.],
       [3., 3., 3., 3.],
       [4., 4., 4., 4.],
       [5., 5., 5., 5.],
       [6., 6., 6., 6.],
       [7., 7., 7., 7.]])

arr[[4,3,0,6]]
Out[66]: 
array([[4., 4., 4., 4.],
       [3., 3., 3., 3.],
       [0., 0., 0., 0.],
       [6., 6., 6., 6.]])

arr[[-3,-5,-7]]
Out[67]: 
array([[5., 5., 5., 5.],
       [3., 3., 3., 3.],
       [1., 1., 1., 1.]])
```

##### 2,一次传入多个索引数租
```py
arr=np.arange(32).reshape((8,4))

arr
Out[71]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31]])

arr[[1,5,7,2],[0,3,1,2]]
Out[72]: array([ 4, 23, 29, 10])

arr[[1,5,7,2]][:,[0,3,1,2]]
Out[73]: 
array([[ 4,  7,  5,  6],
       [20, 23, 21, 22],
       [28, 31, 29, 30],
       [ 8, 11,  9, 10]])

arr[np.ix_([1,5,7,2],[0,3,1,2])]
Out[74]: 
array([[ 4,  7,  5,  6],
       [20, 23, 21, 22],
       [28, 31, 29, 30],
       [ 8, 11,  9, 10]])
```

##### 使用np.ix_函数
```py
arr[np.ix_([1,5,7,2],[0,3,1,2])]
Out[76]: 
array([[ 4,  7,  5,  6],
       [20, 23, 21, 22],
       [28, 31, 29, 30],
       [ 8, 11,  9, 10]])
```
#### 数组转置

```py
arr=np.arange(15).reshape((3,5))

arr
Out[78]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])

arr.T
Out[79]: 
array([[ 0,  5, 10],
       [ 1,  6, 11],
       [ 2,  7, 12],
       [ 3,  8, 13],
       [ 4,  9, 14]])

arr=np.random.randn(6,3)
# np.dot计算矩阵内积XTX
np.dot(arr.T,arr)
Out[81]: 
array([[ 5.67767429,  4.77223208,  1.79733825],
       [ 4.77223208, 12.84521018, -7.51106153],
       [ 1.79733825, -7.51106153, 13.84909794]])

# 对于高维数组，transpose需要德达一个由轴编号组成的元祖才能对这些轴进行转置(不知如何转换)
arr=np.arange(16).reshape((2,2,4))

arr
Out[83]: 
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7]],

       [[ 8,  9, 10, 11],
        [12, 13, 14, 15]]])

arr.transpose((1,0,2))
Out[84]: 
array([[[ 0,  1,  2,  3],
        [ 8,  9, 10, 11]],

       [[ 4,  5,  6,  7],
        [12, 13, 14, 15]]])

arr
Out[85]: 
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7]],

       [[ 8,  9, 10, 11],
        [12, 13, 14, 15]]])

arr
Out[86]: 
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7]],

       [[ 8,  9, 10, 11],
        [12, 13, 14, 15]]])

# ndarray的swapaxes方法，接受一堆轴编号
arr.swapaxes(1,2)
Out[87]: 
array([[[ 0,  4],
        [ 1,  5],
        [ 2,  6],
        [ 3,  7]],

       [[ 8, 12],
        [ 9, 13],
        [10, 14],
        [11, 15]]])
```
